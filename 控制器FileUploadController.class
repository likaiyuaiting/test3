    package cn.upload.controller;  
      
    import java.io.File;  
      
    import javax.servlet.http.HttpServletRequest;  
      
    import org.apache.commons.io.FileUtils;  
    import org.springframework.http.HttpHeaders;  
    import org.springframework.http.HttpStatus;  
    import org.springframework.http.ResponseEntity;  
    import org.springframework.stereotype.Controller;  
    import org.springframework.ui.Model;  
    import org.springframework.web.bind.annotation.ModelAttribute;  
    import org.springframework.web.bind.annotation.RequestMapping;  
    import org.springframework.web.bind.annotation.RequestMethod;  
    import org.springframework.web.bind.annotation.RequestParam;  
    import org.springframework.web.multipart.MultipartFile;  
      
    import cn.upload.domain.User;  
      
    @Controller  
      
    public class FileUploadController {  
      
        @RequestMapping("/UploadFiled")  
        public String s(){  
            System.out.println("==");  
            return "/UploadFiled";  
              
        }  
          
    //  @ResponseBody @RequestParam("description") String description,  
        @RequestMapping(value="/upload",method=RequestMethod.POST)  
        public String  upload(HttpServletRequest request,  
                             @RequestParam("description")String description,  
                             @RequestParam("file") MultipartFile file)throws Exception{  
            System.out.println("sddddd");  
            System.out.println(description);  
            //如果文件不为空，写入上传路径  
            if(!file.isEmpty()){  
                //上传文件路径  
                String path=request.getServletContext().getRealPath("/imag");  
                System.out.println(path);  
                String filename=file.getOriginalFilename();  
                  
                File filepath=new File(path,filename);  
                //判断路径是否存在，如果不存在就创建一个  
                if(!filepath.getParentFile().exists()){  
                    filepath.getParentFile().mkdirs();  
                      
                }  
                //将上传的文件保存到目标文件中  
                file.transferTo(new File(path+File.separator+filename));  
                return "success";  
            }else{  
                return "error";  
            }  
              
        }  
